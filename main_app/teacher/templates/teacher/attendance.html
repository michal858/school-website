{% extends "base.html" %} {% block title %}Obecnosc - {{ lecture.title }}{%
endblock %} {% block extra_css %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/teacher.css') }}"
/>
{% endblock %} {% block content %}
<div class="container">
  <div class="header">
    {% if room_name %}
        <a href="{{ url_for('teacher.attendance', lecture_id=lecture.lid) }}" class="back-link">‚Üê Zmien Sale</a>
    {% else %}
        <a href="{{ url_for('teacher.dashboard') }}" class="back-link">‚Üê Panel Sterowania</a>
    {% endif %}
    <h1>{{ lecture.title }}</h1>
    <p>Obecnosc {% if room_name %}- Sala: {{ room_name }}{% endif %}</p>
  </div>

  <div class="students-card">
    <h2>
      Zapisani ucznowie
      <span class="student-count">{{ enrolled_students|length }}</span>
    </h2>

    {% if enrolled_students %}
    <div class="table-responsive">
      <form method="POST" action="{{ url_for('teacher.attendance', lecture_id=lecture.lid, room=room_name) }}">
        <table class="students-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Imie</th>
              <th>Nazwisko</th>
              <th>Obecnosc</th>
            </tr>
          </thead>
          <tbody>
            {% for student in enrolled_students %}
            <tr>
              <td>{{ loop.index }}</td>
              <td>{{ student.firstName}}</td>
              <td>{{ student.lastName }}</td>
              <td>
                <select
                  name="attendance_{{ student.uid }}"
                  id="attendance_{{ student.uid }}"
                >
                  <option value="obecny" {% if attendance_map.get(student.uid) == 'obecny' %}selected{% endif %}>Obecny</option>
                  <option value="nieobecny" {% if attendance_map.get(student.uid) == 'nieobecny' %}selected{% endif %}>Nieobecny</option>
                  <option value="zwolniony" {% if attendance_map.get(student.uid) == 'zwolniony' %}selected{% endif %}>Zwolniony</option>
                </select>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        <button type="submit">Zapisz</button>
      </form>
    </div>
    {% else %}
    <div class="no-students">
      <div class="no-students-icon">üìã</div>
      <p>Zaden z uczniow nie zapisal sie na ten wyklad</p>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
