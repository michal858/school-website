{% extends "base.html" %} {% block title %}Uzytkownicy{% endblock %} {% block
extra_css %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/admin.css') }}"
/>
{% endblock %} {% block content %}
<h1 class="page-title">Uzytkownicy</h1>
<div
  class="actions-bar"
  style="
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
  "
>
  <a href="{{ url_for('admin.add_user') }}" style="margin-bottom: 0"
    >Dodaj uzytkownikow</a
  >

  <form
    action="{{ url_for('admin.users') }}"
    method="get"
    style="
      display: flex;
      gap: 0.5rem;
      margin: 0;
      padding: 0;
      box-shadow: none;
      background: transparent;
      max-width: none;
    "
  >
    <input
      type="text"
      name="q"
      placeholder="Szukaj uzytkownika..."
      value="{{ search_query }}"
      style="margin: 0; width: 250px"
    />
    <button
      type="submit"
      style="margin: 0; width: auto; padding: 0.75rem 1.5rem"
    >
      Szukaj
    </button>
  </form>
</div>

{% if users.items %}
<div class="table-responsive">
  <table>
    <thead>
      <tr>
        <th>Imie</th>
        <th>Nazwisko</th>
        <th>Email</th>
        <th>Rola</th>
        <th>Akcje</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users.items %}
      <tr>
        <td>{{ user.firstName }}</td>
        <td>{{ user.lastName }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.role }}</td>
        <td>
          <a href="{{ url_for('admin.edit_user', uid=user.uid) }}">Edytuj</a>
          <a href="{{ url_for('admin.delete_user', uid=user.uid) }}">Usun</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- Pagination Controls -->
<div
  class="pagination"
  style="display: flex; justify-content: center; gap: 0.5rem; margin-top: 2rem"
>
  {% if users.has_prev %}
  <a
    href="{{ url_for('admin.users', page=users.prev_num, q=search_query) }}"
    style="
      padding: 0.5rem 1rem;
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 0.5rem;
      text-decoration: none;
      color: #1e293b;
    "
    >&laquo; Poprzednia</a
  >
  {% endif %}

  <span style="padding: 0.5rem 1rem; color: #64748b"
    >Strona {{ users.page }} z {{ users.pages }}</span
  >

  {% if users.has_next %}
  <a
    href="{{ url_for('admin.users', page=users.next_num, q=search_query) }}"
    style="
      padding: 0.5rem 1rem;
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 0.5rem;
      text-decoration: none;
      color: #1e293b;
    "
    >Nastepna &raquo;</a
  >
  {% endif %}
</div>

{% else %}
<p>Nie znaleziono zadnych uzytkownikow</p>
{% endif %} {% endblock %}
